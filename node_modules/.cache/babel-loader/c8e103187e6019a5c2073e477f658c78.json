{"ast":null,"code":"import _defineProperty from \"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/denis/Desktop/projects/tennis-shop/client/src/components/products/Products.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport ProductsFilter from '../products-filter/ProductsFilter';\nimport { withRouter } from 'react-router-dom';\nimport { queryParamsToObject, objectToQueryParams, buildFilterQuery, filterList } from '../../functions/functions';\nimport Product from './parts/Product';\nimport products_filter_data from './filter_data/products_filter_data';\nimport { Link, animateScroll as scroll } from 'react-scroll';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions/actions';\nimport './products.css';\nimport CartPopup from './parts/CartPopup';\nimport products_data from '../../data/data';\nimport BreadCrumbs from '../parts/bread-crumbs/BreadCrumbs';\nimport ProductsFilterMobile from '../products-filter/ProductsFilterMobile';\n\nclass Products extends Component {\n  constructor() {\n    super();\n\n    this.loadData = async () => {\n      const type = this.props.match.params.product_type;\n      let full_list = products_data[type] ? products_data[type] : [];\n      let filter_data = products_filter_data[type] ? products_filter_data[type] : [];\n      this.setState({\n        full_list,\n        filter_data,\n        filter: {},\n        type\n      });\n      let parsed = queryParamsToObject(this.props.history.location.search.split('?')[1]);\n      await this.filter(parsed, full_list);\n      this.setState({\n        filter: parsed,\n        loaded: true\n      });\n      setTimeout(() => {\n        this.setState({\n          loaded_opacity: true\n        });\n      }, 50);\n    };\n\n    this.handleFilter = (name, value) => {\n      const _this$state = this.state,\n            filter = _this$state.filter,\n            full_list = _this$state.full_list;\n\n      let new_filter = _objectSpread({}, filter);\n\n      let elem = Array.isArray(new_filter[name]) ? new_filter[name] : [];\n\n      if (elem.includes(value)) {\n        elem = elem.filter(m => m !== value);\n      } else {\n        elem = [...elem, value];\n      }\n\n      new_filter[name] = elem;\n      this.filter(new_filter, full_list);\n      let query_string = objectToQueryParams(new_filter);\n      this.props.history.push(\"\".concat(query_string));\n      this.setState({\n        filter: new_filter\n      });\n    };\n\n    this.filter = async (new_filter, full_list) => {\n      const query = await buildFilterQuery(new_filter);\n      let new_list = filterList(full_list, query);\n      this.setState({\n        list: new_list\n      });\n    };\n\n    this.resetFilter = () => {\n      const full_list = this.state.full_list;\n      let query_string = objectToQueryParams({});\n      this.props.history.push(\"\".concat(query_string));\n      this.setState({\n        filter: ''\n      });\n      this.filter({}, full_list);\n    };\n\n    this.scrollToTop = () => {\n      scroll.scrollToTop();\n    };\n\n    this.handleCart = product => {\n      this.setState({\n        product\n      });\n      const body = document.querySelector('body');\n      body.style.overflow = 'hidden';\n    };\n\n    this.updateState = (name, value) => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.hideAddProductPopup = () => {\n      this.setState({\n        product: false\n      });\n      const body = document.querySelector('body');\n      body.style.overflow = 'auto';\n    };\n\n    this.state = {\n      list: [],\n      full_list: [],\n      filter_data: [],\n      filter: {}\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n    window.scrollTo(0, 0);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let new_type = nextProps.match.params.product_type;\n    let old_type = this.props.match.params.product_type;\n\n    if (new_type !== old_type) {\n      this.setState({\n        loaded: false,\n        loaded_opacity: false,\n        full_list: []\n      });\n      setTimeout(() => {\n        this.loadData();\n      }, 50);\n    }\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          list = _this$state2.list,\n          filter_data = _this$state2.filter_data,\n          filter = _this$state2.filter,\n          loaded = _this$state2.loaded,\n          full_list = _this$state2.full_list,\n          loaded_opacity = _this$state2.loaded_opacity,\n          product = _this$state2.product,\n          type = _this$state2.type;\n    return loaded ? React.createElement(\"div\", {\n      style: {\n        opacity: loaded_opacity ? 1 : 0\n      },\n      className: \"products\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, product ? React.createElement(CartPopup, {\n      product: product,\n      hideAddProductPopup: this.hideAddProductPopup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }) : '', React.createElement(\"button\", {\n      className: \"products__scroll__top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Link, {\n      activeClass: \"active\",\n      to: \"section1\",\n      spy: true,\n      smooth: true,\n      offset: -200,\n      duration: 300,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(ArrowUpwardIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))), React.createElement(ProductsFilter, {\n      filter_data: filter_data,\n      filter: filter ? filter : {},\n      handleFilter: this.handleFilter,\n      list: full_list,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(ProductsFilterMobile, {\n      filter_data: filter_data,\n      filter: filter ? filter : {},\n      handleFilter: this.handleFilter,\n      list: full_list,\n      resetFilter: this.resetFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"products__list__wrapper list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(BreadCrumbs, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"products__list flex__center\",\n      name: \"section1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, list && list.length > 0 ? list.map(product => {\n      return React.createElement(Product, {\n        handleCart: this.handleCart,\n        product: product,\n        key: product.id,\n        type: type,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      });\n    }) : React.createElement(\"h2\", {\n      className: \"products__empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"NO AVAILABLE PRODUCTS\")))) : '';\n  }\n\n}\n\nfunction mapStateToProps({\n  cart_reducer\n}) {\n  return {\n    cart_reducer\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(Products));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/tennis-shop/client/src/components/products/Products.jsx"],"names":["React","Component","ProductsFilter","withRouter","queryParamsToObject","objectToQueryParams","buildFilterQuery","filterList","Product","products_filter_data","Link","animateScroll","scroll","ArrowUpwardIcon","connect","actions","CartPopup","products_data","BreadCrumbs","ProductsFilterMobile","Products","constructor","loadData","type","props","match","params","product_type","full_list","filter_data","setState","filter","parsed","history","location","search","split","loaded","setTimeout","loaded_opacity","handleFilter","name","value","state","new_filter","elem","Array","isArray","includes","m","query_string","push","query","new_list","list","resetFilter","scrollToTop","handleCart","product","body","document","querySelector","style","overflow","updateState","hideAddProductPopup","componentDidMount","window","scrollTo","componentWillReceiveProps","nextProps","new_type","old_type","render","opacity","length","map","id","mapStateToProps","cart_reducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ProductsFilter from '../products-filter/ProductsFilter';\nimport { withRouter } from 'react-router-dom';\nimport { queryParamsToObject, objectToQueryParams, buildFilterQuery, filterList } from '../../functions/functions';\nimport Product from './parts/Product';\nimport products_filter_data from './filter_data/products_filter_data';\nimport { Link, animateScroll as scroll } from 'react-scroll'\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport { connect } from 'react-redux'\nimport * as actions from '../../actions/actions'\nimport './products.css'\nimport CartPopup from './parts/CartPopup';\nimport products_data from '../../data/data';\nimport BreadCrumbs from '../parts/bread-crumbs/BreadCrumbs';\nimport ProductsFilterMobile from '../products-filter/ProductsFilterMobile';\n\nclass Products extends Component {\n    constructor() {\n        super()\n        this.state = {\n            list: [],\n            full_list: [],\n            filter_data: [],\n            filter: {}\n        }\n    }\n\n\n\n    componentDidMount() {\n\n        this.loadData()\n        window.scrollTo(0, 0)\n    }\n\n\n\n    componentWillReceiveProps(nextProps) {\n        let new_type = nextProps.match.params.product_type\n        let old_type = this.props.match.params.product_type\n        if (new_type !== old_type) {\n            this.setState({\n                loaded: false,\n                loaded_opacity: false,\n                full_list: []\n            })\n            setTimeout(() => {\n                this.loadData()\n            }, 50);\n        }\n    }\n\n    loadData = async () => {\n        const type = this.props.match.params.product_type\n        let full_list = products_data[type] ? products_data[type] : []\n        let filter_data = products_filter_data[type] ? products_filter_data[type] : []\n\n        this.setState({\n            full_list,\n            filter_data,\n            filter: {},\n            type\n        })\n\n        let parsed = queryParamsToObject(this.props.history.location.search.split('?')[1])\n        await this.filter(parsed, full_list)\n        this.setState({\n            filter: parsed,\n            loaded: true\n        })\n        setTimeout(() => {\n            this.setState({\n                loaded_opacity: true\n            })\n        }, 50);\n    }\n\n\n\n\n    handleFilter = (name, value) => {\n        const { filter, full_list } = this.state\n        let new_filter = { ...filter }\n        let elem = Array.isArray(new_filter[name]) ? new_filter[name] : []\n        if (elem.includes(value)) {\n            elem = elem.filter(m => m !== value)\n        } else {\n            elem = [...elem, value]\n        }\n        new_filter[name] = elem\n        this.filter(new_filter, full_list)\n        let query_string = objectToQueryParams(new_filter)\n        this.props.history.push(`${query_string}`)\n        this.setState({\n            filter: new_filter\n        })\n    }\n\n\n    filter = async (new_filter, full_list) => {\n        const query = await buildFilterQuery(new_filter)\n        let new_list = filterList(full_list, query)\n        this.setState({\n            list: new_list\n        })\n\n    }\n\n    resetFilter = () => {\n        const { full_list } = this.state\n\n        let query_string = objectToQueryParams({})\n        this.props.history.push(`${query_string}`)\n        this.setState({\n            filter: ''\n        })\n        this.filter({}, full_list)\n    }\n\n\n    scrollToTop = () => {\n        scroll.scrollToTop();\n    };\n\n\n    handleCart = (product) => {\n        this.setState({\n            product\n        })\n        const body = document.querySelector('body')\n        body.style.overflow  ='hidden'\n    }\n\n    updateState = (name, value) => {\n        this.setState({\n            [name]: value\n        })\n    }\n\n\n    hideAddProductPopup = () => {\n        this.setState({\n            product: false\n        })\n        const body = document.querySelector('body')\n        body.style.overflow  ='auto'\n    }\n\n\n\n    render() {\n        const {\n            list,\n            filter_data,\n            filter,\n            loaded,\n            full_list,\n            loaded_opacity,\n            product,\n            type\n        } = this.state\n\n        return (\n            loaded ? <div\n                style={{ opacity: loaded_opacity ? 1 : 0 }}\n                className='products'>\n                {product ? <CartPopup\n                    product={product}\n                    hideAddProductPopup={this.hideAddProductPopup}\n                /> : ''}\n                <button\n                    className='products__scroll__top'\n                >\n                    <Link\n                        activeClass=\"active\"\n                        to=\"section1\"\n                        spy={true} smooth={true}\n                        offset={-200}\n                        duration={300}>\n                        <ArrowUpwardIcon />\n                    </Link>\n                </button>\n                <ProductsFilter\n                    filter_data={filter_data}\n                    filter={filter ? filter : {}}\n                    handleFilter={this.handleFilter}\n                    list={full_list}\n                />\n                <ProductsFilterMobile\n                    filter_data={filter_data}\n                    filter={filter ? filter : {}}\n                    handleFilter={this.handleFilter}\n                    list={full_list}\n                    resetFilter={this.resetFilter}\n                />\n                <div className='products__list__wrapper list'>\n                    <BreadCrumbs\n                    />\n                    <div className='products__list flex__center'\n                        name=\"section1\">\n\n                        {\n                            list && list.length > 0 ?\n                                list.map(product => {\n                                    return <Product\n                                        handleCart={this.handleCart}\n                                        product={product}\n                                        key={product.id}\n                                        type={type}\n                                    />\n                                }) : <h2 className='products__empty'>NO AVAILABLE PRODUCTS</h2>\n                        }\n                    </div>\n                </div>\n            </div> : ''\n        );\n    }\n}\n\n\nfunction mapStateToProps({ cart_reducer }) {\n    return { cart_reducer }\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(Products))"]},"metadata":{},"sourceType":"module"}