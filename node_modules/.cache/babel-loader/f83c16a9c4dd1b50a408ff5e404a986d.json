{"ast":null,"code":"import _toConsumableArray from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{SET_DATA_TO_CART_REDUCER,ADD_CART_PRODUCTS,REMOVE_PRODUCT_FROM_CART,UPDATE_PRODUCT_IN_CART}from'./types';import{setCookie}from'../tools/cookie';export var setDataToCartReducer=function setDataToCartReducer(name,value){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:SET_DATA_TO_CART_REDUCER,payload:{name:name,value:value}});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};export var addCartProducts=function addCartProducts(product,cart_list,increment_amount){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var new_list,new_id,includes,amount,existing_product,_amount,index;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:new_list=JSON.parse(JSON.stringify(cart_list));new_id=\"\".concat(product.id,\"_\").concat(product.selected_size);//create product cart id\nproduct['cart_id']=product.size?new_id:product.id;includes=cart_list.filter(function(m){return m.cart_id===product.cart_id;})[0];//if product not in cart\nif(!includes){amount=product.amount?product.amount:1;if(increment_amount){amount=increment_amount;}product['amount']=amount;product['total']=amount*product.price;new_list=[].concat(_toConsumableArray(new_list),[product]);}//if product already in cart\nelse{existing_product=cart_list.filter(function(m){return m.cart_id===product.cart_id;})[0];_amount=existing_product.amount;if(increment_amount){_amount=existing_product.amount+increment_amount;}else{_amount++;}product['amount']=_amount;product['total']=_amount*product.price;index=new_list.findIndex(function(m){return m.cart_id===product.cart_id;});new_list.splice(index,1,product);}setCookie('shopping-cart',JSON.stringify(new_list));dispatch({type:ADD_CART_PRODUCTS,payload:new_list});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};export var removeFromCart=function removeFromCart(product,cart_list){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var new_list;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:new_list=JSON.parse(JSON.stringify(cart_list));new_list=new_list.filter(function(m){return m.cart_id!==product.cart_id;});setCookie('shopping-cart',JSON.stringify(new_list));dispatch({type:REMOVE_PRODUCT_FROM_CART,payload:new_list});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());};export var updateProductInCart=function updateProductInCart(product,cart_list){return(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var new_list,index;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:new_list=JSON.parse(JSON.stringify(cart_list));product.total=product.amount*product.price;index=new_list.findIndex(function(m){return m.cart_id===product.cart_id;});new_list.splice(index,1,product);setCookie('shopping-cart',JSON.stringify(new_list));dispatch({type:UPDATE_PRODUCT_IN_CART,payload:new_list});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}());};","map":{"version":3,"sources":["/Users/denis/Desktop/projects/tennis-shop/client/src/actions/cart_actions.js"],"names":["SET_DATA_TO_CART_REDUCER","ADD_CART_PRODUCTS","REMOVE_PRODUCT_FROM_CART","UPDATE_PRODUCT_IN_CART","setCookie","setDataToCartReducer","name","value","dispatch","type","payload","addCartProducts","product","cart_list","increment_amount","new_list","JSON","parse","stringify","new_id","id","selected_size","size","includes","filter","m","cart_id","amount","price","existing_product","index","findIndex","splice","removeFromCart","updateProductInCart","total"],"mappings":"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","sourcesContent":["import {\n    SET_DATA_TO_CART_REDUCER,\n    ADD_CART_PRODUCTS,\n    REMOVE_PRODUCT_FROM_CART,\n    UPDATE_PRODUCT_IN_CART\n} from './types'\nimport { setCookie } from '../tools/cookie'\n\n\nexport const setDataToCartReducer = (name, value) => async dispatch => {\n    dispatch({\n        type: SET_DATA_TO_CART_REDUCER,\n        payload: { name, value }\n    })\n}\n\n\n\nexport const addCartProducts = (product, cart_list, increment_amount) => async dispatch => {\n    let new_list = JSON.parse(JSON.stringify(cart_list))\n    \n   \n    let new_id = `${product.id}_${product.selected_size}`\n    //create product cart id\n    product['cart_id'] = product.size ? new_id : product.id\n    let includes = cart_list.filter(m => m.cart_id === product.cart_id)[0]\n     //if product not in cart\n    if (!includes) {\n        let amount = product.amount ? product.amount : 1\n        if(increment_amount){\n            amount = increment_amount\n        }\n        product['amount'] = amount\n        product['total'] = amount * product.price\n        new_list = [...new_list, product]\n    }\n    //if product already in cart\n    else {\n        let existing_product = cart_list.filter(m => m.cart_id === product.cart_id)[0]\n        let amount = existing_product.amount\n        if(increment_amount){\n            amount = existing_product.amount + increment_amount\n        }else{\n            amount++\n        }\n        product['amount'] = amount\n        product['total'] = amount * product.price\n        let index = new_list.findIndex(m => m.cart_id === product.cart_id)\n        new_list.splice(index, 1, product)\n    }\n    setCookie('shopping-cart', JSON.stringify(new_list))\n    dispatch({\n        type: ADD_CART_PRODUCTS,\n        payload: new_list\n    })\n}\n\n\n\n\nexport const removeFromCart = (product, cart_list) => async dispatch => {\n    let new_list = JSON.parse(JSON.stringify(cart_list))\n    new_list = new_list.filter(m => m.cart_id !== product.cart_id)\n    setCookie('shopping-cart', JSON.stringify(new_list))\n\n    dispatch({\n        type: REMOVE_PRODUCT_FROM_CART,\n        payload: new_list\n    })\n}\n\n\nexport const updateProductInCart = (product, cart_list) => async dispatch => {\n    let new_list = JSON.parse(JSON.stringify(cart_list))\n    product.total = product.amount * product.price\n    let index = new_list.findIndex(m => m.cart_id === product.cart_id)\n    new_list.splice(index, 1, product)\n    setCookie('shopping-cart', JSON.stringify(new_list))\n    dispatch({\n        type: UPDATE_PRODUCT_IN_CART,\n        payload: new_list\n    })\n}\n\n\n"]},"metadata":{},"sourceType":"module"}