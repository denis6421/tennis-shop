{"ast":null,"code":"import _classCallCheck from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import*as actions from'../../actions/actions';import CartPreviewProduct from'./parts/CartPreviewProduct';import ArrowForwardIcon from'@material-ui/icons/ArrowForward';import{Link}from'react-router-dom';import'./cart.css';import{CART_ROUTE}from'../../tools/routes';import ShoppingCartIcon from'@material-ui/icons/ShoppingCart';import CloseIcon from'@material-ui/icons/Close';var CartPreview=/*#__PURE__*/function(_Component){_inherits(CartPreview,_Component);function CartPreview(){var _getPrototypeOf2;var _this;_classCallCheck(this,CartPreview);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CartPreview)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.setWrapperRef=function(node){_this.wrapperRef=node;};_this.handleClickOutside=function(event){var show_cart=_this.props.cart_reducer.show_cart;var close=true;if(event.target.classList&&event.target.classList.value.indexOf('navbar__cart__element')>-1){close=false;}if(_this.wrapperRef&&!_this.wrapperRef.contains(event.target)&&show_cart&&close){_this.hideList();}};_this.hideList=function(){_this.props.setDataToCartReducer('show_cart',false);var body=document.querySelector('body');body.style.overflow='auto';};return _this;}_createClass(CartPreview,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('mousedown',this.handleClickOutside);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('mousedown',this.handleClickOutside);}},{key:\"render\",value:function render(){var _this2=this;var _this$props$cart_redu=this.props.cart_reducer,cart_list=_this$props$cart_redu.cart_list,show_cart=_this$props$cart_redu.show_cart;return React.createElement(\"div\",{className:\"cart\",id:show_cart?'cart--active':''},React.createElement(\"section\",{className:\"overlay\"}),React.createElement(\"div\",{ref:this.setWrapperRef,className:\"cart__list\"},React.createElement(\"button\",{onClick:function onClick(){return _this2.hideList();},className:\"close__cart__btn\"},React.createElement(CloseIcon,null)),React.createElement(\"header\",null,\"Cart Preview\"),React.createElement(\"ul\",null,cart_list&&cart_list.length>0?cart_list.map(function(product){return React.createElement(CartPreviewProduct,{key:product.cart_id,product:product,hideList:_this2.hideList});}):React.createElement(\"span\",{className:\"empty__cart__preview flex__column\"},React.createElement(\"h3\",null,\" CART IS EMPTY\"),React.createElement(\"figure\",{className:\"flex__center\"},\" \",React.createElement(ShoppingCartIcon,null)))),cart_list&&cart_list.length>0?React.createElement(Link,{className:\"go__to__cart flex__center\",to:CART_ROUTE},React.createElement(\"p\",null,\"Go To Shopping Cart\"),React.createElement(ArrowForwardIcon,null)):''));}}]);return CartPreview;}(Component);function mapStateToProps(_ref){var cart_reducer=_ref.cart_reducer;return{cart_reducer:cart_reducer};}export default withRouter(connect(mapStateToProps,actions)(CartPreview));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/tennis-shop/client/src/components/cart/CartPreview.jsx"],"names":["React","Component","withRouter","connect","actions","CartPreviewProduct","ArrowForwardIcon","Link","CART_ROUTE","ShoppingCartIcon","CloseIcon","CartPreview","setWrapperRef","node","wrapperRef","handleClickOutside","event","show_cart","props","cart_reducer","close","target","classList","value","indexOf","contains","hideList","setDataToCartReducer","body","document","querySelector","style","overflow","addEventListener","removeEventListener","cart_list","length","map","product","cart_id","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux'\nimport * as actions from '../../actions/actions'\nimport CartPreviewProduct from './parts/CartPreviewProduct';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport {Link} from 'react-router-dom'\nimport './cart.css'\nimport { CART_ROUTE } from '../../tools/routes';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport CloseIcon from '@material-ui/icons/Close';\n\n\nclass CartPreview extends Component {\n    setWrapperRef = (node) => {\n        this.wrapperRef = node;\n    }\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n\n    }\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside = (event) => {\n        const {  show_cart } = this.props.cart_reducer\n        let close = true\n        if(event.target.classList && event.target.classList.value.indexOf('navbar__cart__element') > -1){\n            close = false\n        }\n        \n        if (this.wrapperRef &&\n            !this.wrapperRef.contains(event.target) && show_cart && close) {\n                this.hideList()\n        }\n    }\n\n    hideList = () => {\n        this.props.setDataToCartReducer('show_cart', false)\n        const body = document.querySelector('body')\n        body.style.overflow = 'auto'\n    }\n  \n    render() {\n        const { cart_list, show_cart } = this.props.cart_reducer\n        return (\n            <div className='cart'\n\n                id={show_cart ? 'cart--active' : ''}\n            >\n               \n                <section className=\"overlay\"\n                ></section>\n                <div\n                    ref={this.setWrapperRef}\n                    className='cart__list'>\n                         <button\n                         onClick = {() => this.hideList()}\n                         className='close__cart__btn'><CloseIcon /></button>\n                        <header>\n                           Cart Preview\n                        </header>\n                    <ul>\n                        {\n                            cart_list && cart_list.length > 0 ?\n                            cart_list.map(product => {\n                                return <CartPreviewProduct\n                                key = {product.cart_id}\n                                    product={product}\n                                    hideList = {this.hideList}\n                                />\n                            }) : \n                            <span className='empty__cart__preview flex__column'>\n                                     <h3> CART IS EMPTY</h3>\n                               <figure className='flex__center'> <ShoppingCartIcon /></figure>\n                          \n                                </span>\n                        }\n                    </ul>\n                   {cart_list && cart_list.length > 0 ?  <Link\n                    className='go__to__cart flex__center'\n                    to ={CART_ROUTE}>\n                        <p>Go To Shopping Cart</p>\n                        <ArrowForwardIcon />\n                    </Link>  :''}\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps({ cart_reducer }) {\n    return { cart_reducer }\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(CartPreview))\n"]},"metadata":{},"sourceType":"module"}