{"ast":null,"code":"import _defineProperty from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/tennis-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import products_data from'../../data/data';import{connect}from'react-redux';import*as actions from'../../actions/actions';import'./product-page.css';import Incrementor from'../parts/incrementor/Incrementor';import SelectBox from'../parts/selectbox/SelectBox';import StatusPopup from'../parts/add-success/StatusPopup';import CheckCircleOutlineOutlinedIcon from'@material-ui/icons/CheckCircleOutlineOutlined';import BreadCrumbs from'../parts/bread-crumbs/BreadCrumbs';import Fade from'react-reveal/Fade';var ProductPage=/*#__PURE__*/function(_Component){_inherits(ProductPage,_Component);function ProductPage(){var _this;_classCallCheck(this,ProductPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProductPage).call(this));_this.setProduct=function(product_id){window.scrollTo(0,0);var type='';var product;if(product_id){Object.entries(products_data).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];value.filter(function(m){if(m.id===product_id){type=key;product=m;product['amount']=1;_this.setState({type:type,product:product,product_id:product_id});}});});}};_this.updateProduct=function(name,value){var product=_this.state.product;if(name==='amount'){_this.setState({amount:value});}else{var product_to_add=JSON.parse(JSON.stringify(product));product_to_add[name]=value;_this.setState({product:product_to_add});}};_this.updateState=function(name,value){_this.setState(_defineProperty({},name,value));};_this.closePopup=function(){_this.setState({added:false,amount:1});};_this.addProduct=function(){var _this$state=_this.state,product=_this$state.product,amount=_this$state.amount;var cart_list=_this.props.cart_reducer.cart_list;var product_to_add=JSON.parse(JSON.stringify(product));product_to_add['amount']=amount;if(product.size&&product.selected_size){_this.props.addCartProducts(product,cart_list,amount);_this.setState({added:true});_this.updateProduct('selected_size','');}else{_this.setState({error:true});}if(!product.size){_this.props.addCartProducts(product,cart_list,amount);_this.setState({added:true});_this.updateProduct('selected_size','');}};_this.state={amount:1};return _this;}_createClass(ProductPage,[{key:\"componentDidMount\",value:function componentDidMount(){var product_id=this.props.match.params.product_id;this.setProduct(product_id);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var product_id=this.state.product_id;if(nextProps.match.params.product_id!==product_id){this.setProduct(nextProps.match.params.product_id);}}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,error=_this$state2.error,product=_this$state2.product,amount=_this$state2.amount,added=_this$state2.added,img_loaded=_this$state2.img_loaded;return product?React.createElement(\"div\",{className:\"product__page\"},React.createElement(BreadCrumbs,{product_name:product.title}),React.createElement(StatusPopup,{with_overlay:true,title:\"Product added to cart\",handleFunction:this.closePopup,svg:React.createElement(CheckCircleOutlineOutlinedIcon,null),button_text:\"CLOSE\",active:added}),React.createElement(\"div\",{className:\"product__page__content flex__center\"},React.createElement(Fade,{clear:true},React.createElement(\"figure\",{className:\"product__page__img\"},React.createElement(\"img\",{src:product.img,alt:\"\",style:{opacity:img_loaded?1:0},onLoad:function onLoad(){return _this2.setState({img_loaded:true});}}),React.createElement(\"aside\",{id:img_loaded?'figure__img__loader--disabled':'',className:\"figure__img__loader\"}))),React.createElement(Fade,{clear:true},React.createElement(\"section\",{className:\"product__page__details\"},React.createElement(\"h3\",null,product.title),React.createElement(\"h4\",null,\"$\".concat(product.price)),product.size?React.createElement(SelectBox,{property_name:\"selected_size\",value:product.selected_size,select:this.updateProduct,options:product.size?product.size:[],error:error,updateParentState:this.updateState}):'',React.createElement(Incrementor,{property_name:\"amount\",updateParent:this.updateProduct,value:amount}),React.createElement(\"button\",{className:\"product__page__add__btn\",onClick:function onClick(){return _this2.addProduct();}},\"ADD TO CART\"))))):'';}}]);return ProductPage;}(Component);function mapStateToProps(_ref3){var cart_reducer=_ref3.cart_reducer;return{cart_reducer:cart_reducer};}export default withRouter(connect(mapStateToProps,actions)(ProductPage));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/tennis-shop/client/src/components/product-page/ProductPage.jsx"],"names":["React","Component","withRouter","products_data","connect","actions","Incrementor","SelectBox","StatusPopup","CheckCircleOutlineOutlinedIcon","BreadCrumbs","Fade","ProductPage","setProduct","product_id","window","scrollTo","type","product","Object","entries","forEach","key","value","filter","m","id","setState","updateProduct","name","state","amount","product_to_add","JSON","parse","stringify","updateState","closePopup","added","addProduct","cart_list","props","cart_reducer","size","selected_size","addCartProducts","error","match","params","nextProps","img_loaded","title","img","opacity","price","mapStateToProps"],"mappings":"iqCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,uBAAzB,CACA,MAAO,oBAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CACA,MAAOC,CAAAA,8BAAP,KAA2C,+CAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,C,GAGMC,CAAAA,W,qEACF,sBAAc,6CACV,+EADU,MAedC,UAfc,CAeD,SAACC,UAAD,CAAgB,CACzBC,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAkB,CAAlB,EACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,OAAJ,CACA,GAAIJ,UAAJ,CAAgB,CACZK,MAAM,CAACC,OAAP,CAAejB,aAAf,EAA8BkB,OAA9B,CAAsC,cAAkB,kCAAhBC,GAAgB,UAAXC,KAAW,UACpDA,KAAK,CAACC,MAAN,CAAa,SAAAC,CAAC,CAAI,CACd,GAAIA,CAAC,CAACC,EAAF,GAASZ,UAAb,CAAyB,CACrBG,IAAI,CAAGK,GAAP,CACAJ,OAAO,CAAGO,CAAV,CACAP,OAAO,CAAC,QAAD,CAAP,CAAoB,CAApB,CACA,MAAKS,QAAL,CAAc,CACVV,IAAI,CAAJA,IADU,CAEVC,OAAO,CAAPA,OAFU,CAGVJ,UAAU,CAAVA,UAHU,CAAd,EAKH,CACJ,CAXD,EAYH,CAbD,EAcH,CACJ,CAnCa,OAsCdc,aAtCc,CAsCE,SAACC,IAAD,CAAON,KAAP,CAAiB,IACrBL,CAAAA,OADqB,CACT,MAAKY,KADI,CACrBZ,OADqB,CAE7B,GAAIW,IAAI,GAAK,QAAb,CAAuB,CACnB,MAAKF,QAAL,CAAc,CACVI,MAAM,CAAER,KADE,CAAd,EAGH,CAJD,IAIO,CACH,GAAIS,CAAAA,cAAc,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAejB,OAAf,CAAX,CAArB,CACAc,cAAc,CAACH,IAAD,CAAd,CAAuBN,KAAvB,CACA,MAAKI,QAAL,CAAc,CACVT,OAAO,CAAEc,cADC,CAAd,EAGH,CACJ,CAnDa,OA4DdI,WA5Dc,CA4DA,SAACP,IAAD,CAAON,KAAP,CAAiB,CAC3B,MAAKI,QAAL,oBACKE,IADL,CACYN,KADZ,GAGH,CAhEa,OAkEdc,UAlEc,CAkED,UAAM,CACf,MAAKV,QAAL,CAAc,CACVW,KAAK,CAAE,KADG,CAETP,MAAM,CAAE,CAFC,CAAd,EAIH,CAvEa,OAwEdQ,UAxEc,CAwED,UAAM,iBACa,MAAKT,KADlB,CACPZ,OADO,aACPA,OADO,CACEa,MADF,aACEA,MADF,IAEPS,CAAAA,SAFO,CAEO,MAAKC,KAAL,CAAWC,YAFlB,CAEPF,SAFO,CAGf,GAAIR,CAAAA,cAAc,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAejB,OAAf,CAAX,CAArB,CACAc,cAAc,CAAC,QAAD,CAAd,CAA2BD,MAA3B,CACA,GAAIb,OAAO,CAACyB,IAAR,EAAgBzB,OAAO,CAAC0B,aAA5B,CAA2C,CACvC,MAAKH,KAAL,CAAWI,eAAX,CAA2B3B,OAA3B,CAAoCsB,SAApC,CAA+CT,MAA/C,EACA,MAAKJ,QAAL,CAAc,CACVW,KAAK,CAAE,IADG,CAAd,EAGA,MAAKV,aAAL,CAAmB,eAAnB,CAAoC,EAApC,EACH,CAND,IAMO,CACH,MAAKD,QAAL,CAAc,CACVmB,KAAK,CAAE,IADG,CAAd,EAGH,CACD,GAAI,CAAC5B,OAAO,CAACyB,IAAb,CAAmB,CACf,MAAKF,KAAL,CAAWI,eAAX,CAA2B3B,OAA3B,CAAoCsB,SAApC,CAA+CT,MAA/C,EACA,MAAKJ,QAAL,CAAc,CACVW,KAAK,CAAE,IADG,CAAd,EAIA,MAAKV,aAAL,CAAmB,eAAnB,CAAoC,EAApC,EACH,CAEJ,CAjGa,CAEV,MAAKE,KAAL,CAAa,CACTC,MAAM,CAAE,CADC,CAAb,CAFU,aAKb,C,qFAImB,CAChB,GAAMjB,CAAAA,UAAU,CAAG,KAAK2B,KAAL,CAAWM,KAAX,CAAiBC,MAAjB,CAAwBlC,UAA3C,CACA,KAAKD,UAAL,CAAgBC,UAAhB,EACH,C,4EA0CyBmC,S,CAAW,IACzBnC,CAAAA,UADyB,CACV,KAAKgB,KADK,CACzBhB,UADyB,CAEjC,GAAImC,SAAS,CAACF,KAAV,CAAgBC,MAAhB,CAAuBlC,UAAvB,GAAsCA,UAA1C,CAAsD,CAClD,KAAKD,UAAL,CAAgBoC,SAAS,CAACF,KAAV,CAAgBC,MAAhB,CAAuBlC,UAAvC,EACH,CACJ,C,uCAuCQ,kCACiD,KAAKgB,KADtD,CACGgB,KADH,cACGA,KADH,CACU5B,OADV,cACUA,OADV,CACmBa,MADnB,cACmBA,MADnB,CAC2BO,KAD3B,cAC2BA,KAD3B,CACmCY,UADnC,cACmCA,UADnC,CAEL,MACIhC,CAAAA,OAAO,CAAG,2BAAK,SAAS,CAAC,eAAf,EACN,oBAAC,WAAD,EACI,YAAY,CAAEA,OAAO,CAACiC,KAD1B,EADM,CAIN,oBAAC,WAAD,EACI,YAAY,CAAE,IADlB,CAEI,KAAK,CAAC,uBAFV,CAGI,cAAc,CAAE,KAAKd,UAHzB,CAII,GAAG,CAAE,oBAAC,8BAAD,MAJT,CAKI,WAAW,CAAC,OALhB,CAMI,MAAM,CAAEC,KANZ,EAJM,CAYN,2BAAK,SAAS,CAAC,qCAAf,EACG,oBAAC,IAAD,EAAM,KAAK,KAAX,EACA,8BAAQ,SAAS,CAAC,oBAAlB,EACK,2BAAK,GAAG,CAAEpB,OAAO,CAACkC,GAAlB,CAAuB,GAAG,CAAC,EAA3B,CACA,KAAK,CAAG,CACJC,OAAO,CAACH,UAAU,CAAG,CAAH,CAAO,CADrB,CADR,CAIA,MAAM,CAAI,wBAAM,CAAA,MAAI,CAACvB,QAAL,CAAc,CAC1BuB,UAAU,CAAC,IADe,CAAd,CAAN,EAJV,EADL,CASO,6BACM,EAAE,CAAEA,UAAU,CAAG,+BAAH,CAAqC,EADzD,CAEM,SAAS,CAAC,qBAFhB,EATP,CADA,CADH,CAgBG,oBAAC,IAAD,EAAM,KAAK,KAAX,EACC,+BAAS,SAAS,CAAC,wBAAnB,EAEG,8BAAKhC,OAAO,CAACiC,KAAb,CAFH,CAKC,yCAASjC,OAAO,CAACoC,KAAjB,EALD,CAOKpC,OAAO,CAACyB,IAAR,CACG,oBAAC,SAAD,EACA,aAAa,CAAC,eADd,CAEA,KAAK,CAAEzB,OAAO,CAAC0B,aAFf,CAGA,MAAM,CAAE,KAAKhB,aAHb,CAIA,OAAO,CAAEV,OAAO,CAACyB,IAAR,CAAezB,OAAO,CAACyB,IAAvB,CAA8B,EAJvC,CAKA,KAAK,CAAEG,KALP,CAMA,iBAAiB,CAAE,KAAKV,WANxB,EADH,CAQI,EAfT,CAiBG,oBAAC,WAAD,EACK,aAAa,CAAC,QADnB,CAEK,YAAY,CAAE,KAAKR,aAFxB,CAGK,KAAK,CAAEG,MAHZ,EAjBH,CAwBG,8BACK,SAAS,CAAC,yBADf,CAEK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACQ,UAAL,EAAN,EAFd,gBAxBH,CADD,CAhBH,CAZM,CAAH,CA6DE,EA9Db,CAgEH,C,yBArKqBtC,S,EAyK1B,QAASsD,CAAAA,eAAT,OAA2C,IAAhBb,CAAAA,YAAgB,OAAhBA,YAAgB,CACvC,MAAO,CAAEA,YAAY,CAAZA,YAAF,CAAP,CACH,CAED,cAAexC,CAAAA,UAAU,CAACE,OAAO,CAACmD,eAAD,CAAkBlD,OAAlB,CAAP,CAAkCO,WAAlC,CAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport products_data from '../../data/data';\nimport { connect } from 'react-redux'\nimport * as actions from '../../actions/actions'\nimport './product-page.css'\nimport Incrementor from '../parts/incrementor/Incrementor';\nimport SelectBox from '../parts/selectbox/SelectBox';\nimport StatusPopup from '../parts/add-success/StatusPopup';\nimport CheckCircleOutlineOutlinedIcon from '@material-ui/icons/CheckCircleOutlineOutlined';\nimport BreadCrumbs from '../parts/bread-crumbs/BreadCrumbs';\nimport Fade from 'react-reveal/Fade';\n\n\nclass ProductPage extends Component {\n    constructor() {\n        super()\n        this.state = {\n            amount: 1\n        }\n    }\n\n\n\n    componentDidMount() {\n        const product_id = this.props.match.params.product_id\n        this.setProduct(product_id)\n    }\n\n\n    setProduct = (product_id) => {\n        window.scrollTo(0,0)\n        let type = ''\n        let product\n        if (product_id) {\n            Object.entries(products_data).forEach(([key, value]) => {\n                value.filter(m => {\n                    if (m.id === product_id) {\n                        type = key\n                        product = m\n                        product['amount'] = 1\n                        this.setState({\n                            type,\n                            product,\n                            product_id\n                        })\n                    }\n                })\n            })\n        }\n    }\n\n\n    updateProduct = (name, value) => {\n        const { product } = this.state\n        if (name === 'amount') {\n            this.setState({\n                amount: value\n            })\n        } else {\n            let product_to_add = JSON.parse(JSON.stringify(product))\n            product_to_add[name] = value\n            this.setState({\n                product: product_to_add\n            })\n        }\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        const { product_id } = this.state\n        if (nextProps.match.params.product_id !== product_id) {\n            this.setProduct(nextProps.match.params.product_id)\n        }\n    }\n    updateState = (name, value) => {\n        this.setState({\n            [name]: value\n        })\n    }\n\n    closePopup = () => {\n        this.setState({\n            added: false,\n             amount: 1\n        })\n    }\n    addProduct = () => {\n        const { product, amount } = this.state\n        const { cart_list } = this.props.cart_reducer\n        let product_to_add = JSON.parse(JSON.stringify(product))\n        product_to_add['amount'] = amount\n        if (product.size && product.selected_size) {\n            this.props.addCartProducts(product, cart_list, amount)\n            this.setState({\n                added: true\n            })\n            this.updateProduct('selected_size', '')\n        } else {\n            this.setState({\n                error: true\n            })\n        }\n        if (!product.size) {\n            this.props.addCartProducts(product, cart_list, amount)\n            this.setState({\n                added: true,\n\n            })\n            this.updateProduct('selected_size', '')\n        }\n\n    }\n    render() {\n        const { error, product, amount, added , img_loaded} = this.state\n        return (\n            product ? <div className='product__page'>\n                <BreadCrumbs\n                    product_name={product.title}\n                />\n                <StatusPopup\n                    with_overlay={true}\n                    title='Product added to cart'\n                    handleFunction={this.closePopup}\n                    svg={<CheckCircleOutlineOutlinedIcon />}\n                    button_text='CLOSE'\n                    active={added}\n                />\n                <div className='product__page__content flex__center'>\n                   <Fade clear>\n                   <figure className='product__page__img'>\n                        <img src={product.img} alt=\"\" \n                        style ={{\n                            opacity:img_loaded ? 1 : 0\n                        }}\n                        onLoad = {() => this.setState({\n                            img_loaded:true\n                        })}\n                        />\n                          <aside\n                                id={img_loaded ? 'figure__img__loader--disabled'  :''}\n                                className='figure__img__loader'></aside>\n                    </figure>\n                   </Fade>\n                   <Fade clear>\n                    <section className='product__page__details'>\n                     \n                       <h3>{product.title}</h3>\n                      \n                   \n                     <h4>{`$${product.price}`}</h4>\n                    \n                        {product.size ? \n                            <SelectBox\n                            property_name='selected_size'\n                            value={product.selected_size}\n                            select={this.updateProduct}\n                            options={product.size ? product.size : []}\n                            error={error}\n                            updateParentState={this.updateState}\n                        /> : ''}\n                      \n                       <Incrementor\n                            property_name='amount'\n                            updateParent={this.updateProduct}\n                            value={amount}\n                        />\n                      \n                      \n                       <button\n                            className='product__page__add__btn'\n                            onClick={() => this.addProduct()}>ADD TO CART</button>\n                      \n\n                    </section>\n                    </Fade>\n                </div>\n            </div> : ''\n        );\n    }\n}\n\n\nfunction mapStateToProps({ cart_reducer }) {\n    return { cart_reducer }\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(ProductPage))\n"]},"metadata":{},"sourceType":"module"}